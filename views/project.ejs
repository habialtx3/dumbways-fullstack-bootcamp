<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Project</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="/style.css">
</head>

<body class="bg-body-tertiary d-flex flex-column">
    <%- include('partials/navbar') %>
    
    <main class="d-flex flex-column gap-4 justify-content-center align-items-center m-5">
        <h1 class="text-center fw-bold">ADD MY PROJECT</h1>
        <div class="w-75 d-flex gap-1 flex-column mt-3">
            <form id="projectForm" 
            action="/project"
            method="POST"
            >
                <div class="mb-3">
                    <label for="project_name" class="form-label fw-bold">Project Name</label>
                    <input type="text" class="form-control shadow-sm" id="project_name" name="name">
                </div>
                <div class="d-flex flex-row gap-5">
                    <div class="mb-3 w-50">
                        <label for="start_date" class="form-label fw-bold">Start Date</label>
                        <input type="date" class="form-control shadow-sm" id="start_date" name="start_date">
                    </div>
                    <div class="mb-3 w-50">
                        <label for="end_date" class="form-label fw-bold">End Date</label>
                        <input type="date" class="form-control shadow-sm" id="end_date" name="end_date">
                    </div>
                </div>
                <div class="mb-3">
                    <label for="description" class="form-label fw-bold">Descsription</label>
                    <textarea class="form-control shadow-sm" id="description" rows="3" name="description"></textarea>
                </div>
                <div class="mb-3">
                    <label for="technologies" class="form-label fw-bold">Technologies</label>
                    <div class="d-grid gap-2 w-50">
                        <div class="row">
                            <div class="col">
                                <div class="form-check">
                                    <input type="checkbox" name="technologies[]" class="form-check-input" value="Node Js" id="tech_node">
                                    <label for="tech_node">Node Js</label>
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-check">
                                    <input type="checkbox" name="technologies[]" class="form-check-input" value="Next Js" id="tech_next">
                                    <label for="tech_next">Next Js</label>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="form-check">
                                    <input type="checkbox" name="technologies[]" class="form-check-input" value="React Js" id="tech_react">
                                    <label for="tech_react">React Js</label>
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-check">
                                    <input type="checkbox" name="technologies[]" class="form-check-input" value="Typescript"
                                        id="tech_typescript">
                                    <label for="tech_typescript">Typescript</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="input-group mb-4">
                    <input type="file" class="form-control" id="file_input" name="image" aria-describedby="inputGroupFileAddon04"
                        aria-label="Upload">
                </div> -->
                <div class="d-flex align-content-end justify-content-end">
                    <button class="btn btn-dark" type="submit" id="submitBtn">Submit</button>
                </div>
            </form>
        </div>
    </main>

    <div name="list_task" class="bg-white d-flex align-content-center justify-content-center">
        <div class="w-100 m-3">
            <h1 class="text-center fw-bold">My Project List</h1>
            <div class="mt-3 row mx-5 g-5" id="cardList">
            </div>
        </div>
    </div>
    </div>
</body>

<script>
      const projects = <%- JSON.stringify(projects) %>

  const cardList = document.getElementById("cardList")

  projects.forEach(p => {
    cardList.innerHTML += `
      <div class="col-md-4">
        <div class="card shadow-sm h-100">
          <img 
  src="/uploads/proyek_default.png"
  class="card-img-top"
/>
          <div class="card-body">
            <h5 class="card-title">${p.name}</h5>
            <p class="card-text">${p.description}</p>
            <p class="text-muted">
              ${p.start_date} - ${p.end_date}
            </p>
            <p class="fw-bold">${p.technologies}</p>
            <div class="d-flex gap-3 mb-3 align-content-center justify-content-center">
            <a class="btn btn-dark" onclick="editProject('${p.id}')">Edit</a>
                        <a class="btn btn-dark" onclick="deleteProject('${p.id}')">Delete</a>
            </div>
          </div>
        </div>
      </div>
    `
  })
</script>

</html>